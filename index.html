<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Konwerter prędkości</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0f172a;
      color: #e5e7eb;
    }

    .card {
      background: #020617;
      border-radius: 16px;
      padding: 24px 22px;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 1.4rem;
    }

    h2 {
      margin: 24px 0 10px;
      font-size: 1.1rem;
    }

    .subtitle {
      margin: 0 0 20px;
      font-size: 0.9rem;
      color: #9ca3af;
    }

    label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 6px;
    }

    .hint {
      font-size: 0.8rem;
      color: #9ca3af;
      margin: -4px 0 8px;
    }

    .input-row {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    input[type="number"],
    input[type="text"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 0.95rem;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease;
    }

    input:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5);
    }

    .unit {
      font-size: 0.9rem;
      color: #9ca3af;
      white-space: nowrap;
    }

    .result-box {
      margin-top: 18px;
      padding: 14px 12px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px dashed #4b5563;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .result-label {
      font-size: 0.85rem;
      color: #9ca3af;
    }

    .result-value {
      font-size: 1.4rem;
      font-variant-numeric: tabular-nums;
    }

    .error {
      margin-top: 8px;
      font-size: 0.8rem;
      color: #f97316;
      min-height: 1em;
    }

    .examples {
      margin-top: 18px;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .examples code {
      background: rgba(15, 23, 42, 0.7);
      padding: 2px 4px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Konwerter prędkości</h1>
    <!-- SEKCJA 1: KM/H → TEMPO -->
    <h2>km/h → mm:ss/km</h2>
    
    <label for="speed">Prędkość (km/h)</label>
    <div class="input-row">
      <input
        id="speed"
        type="number"
        step="0.1"
        min="0"
        placeholder="np. 12.5"
      />
      <span class="unit">km/h</span>
    </div>

    <div class="result-box">
      <div>
        <div class="result-label">Tempo</div>
        <div id="pace" class="result-value">–:–/km</div>
      </div>
    </div>

    <div id="error1" class="error"></div>

    <!-- SEKCJA 2: TEMPO → KM/H -->
    <h2>mm:ss/km → km/h</h2>

    <label for="paceInput">Tempo (mm:ss)</label>
    <input
      id="paceInput"
      type="text"
      placeholder="np. 5:00"
    />
    <p class="hint">Format: minuty:sekundy, np. 4:30, 5:00, 6:15.</p>

    <div class="result-box">
      <div>
        <div class="result-label">Prędkość</div>
        <div id="speedOut" class="result-value">– km/h</div>
      </div>
    </div>

    <div id="error2" class="error"></div>

    <!-- SEKCJA 3: TEMPO + CZAS → DYSTANS -->
    <h2>Tempo + czas → dystans</h2>

    <p class="hint">Używa tego samego tempa z pola powyżej.</p>

    <label for="duration">Czas trwania (minuty)</label>
    <input
      id="duration"
      type="number"
      min="1"
      step="1"
      placeholder="np. 50"
    />

    <div class="result-box">
      <div>
        <div class="result-label">Dystans</div>
        <div id="distanceOut" class="result-value">– km</div>
      </div>
    </div>

    <div id="error3" class="error"></div>

    <div class="examples">
      Przykłady:<br />
      <code>10 km/h → 6:00/km</code><br />
      <code>12 km/h → 5:00/km</code><br />
      <code>5:00/km → 12 km/h</code><br />
      <code>4:00/km przez 50 min → ok. 12.50 km</code>
    </div>
  </div>

  <script>
    // --- km/h → tempo ---
    const speedInput = document.getElementById("speed");
    const paceOutput = document.getElementById("pace");
    const error1 = document.getElementById("error1");

    function formatPaceFromSpeed(speed) {
      if (!speed || speed <= 0) return null;

      const minutesPerKm = 60 / speed;
      const minutes = Math.floor(minutesPerKm);
      let seconds = Math.round((minutesPerKm - minutes) * 60);

      if (seconds === 60) {
        seconds = 0;
        return `${minutes + 1}:${String(seconds).padStart(2, "0")}/km`;
      }

      return `${minutes}:${String(seconds).padStart(2, "0")}/km`;
    }

    function updatePace() {
      const value = speedInput.value.trim();
      error1.textContent = "";

      if (value === "") {
        paceOutput.textContent = "–:–/km";
        return;
      }

      const speed = Number(value.replace(",", "."));
      if (Number.isNaN(speed) || speed <= 0) {
        paceOutput.textContent = "–:–/km";
        error1.textContent = "Wpisz poprawną prędkość.";
        return;
      }

      const pace = formatPaceFromSpeed(speed);
      paceOutput.textContent = pace || "–:–/km";
    }

    speedInput.addEventListener("input", updatePace);


    // --- tempo → km/h ---
    const paceInput = document.getElementById("paceInput");
    const speedOut = document.getElementById("speedOut");
    const error2 = document.getElementById("error2");

    function convertPaceToSpeed(paceStr) {
      if (!paceStr) return null;

      const parts = paceStr.split(":");
      if (parts.length !== 2) return null;

      const minutes = Number(parts[0]);
      const seconds = Number(parts[1]);

      if (
        Number.isNaN(minutes) ||
        Number.isNaN(seconds) ||
        minutes < 0 ||
        seconds < 0 ||
        seconds >= 60
      ) {
        return null;
      }

      const totalMinutes = minutes + seconds / 60;
      const speed = 60 / totalMinutes; // km/h
      return speed;
    }

    function updateSpeed() {
      const value = paceInput.value.trim();
      error2.textContent = "";

      if (value === "") {
        speedOut.textContent = "– km/h";
        return;
      }

      const speed = convertPaceToSpeed(value);
      if (!speed) {
        speedOut.textContent = "– km/h";
        error2.textContent = "Wpisz tempo w formacie mm:ss.";
        return;
      }

      speedOut.textContent = speed.toFixed(2) + " km/h";
    }

    // --- tempo + czas → dystans ---
const durationInput = document.getElementById("duration");
const distanceOut = document.getElementById("distanceOut");
const error3 = document.getElementById("error3");

function getCurrentSpeed() {
  const paceStr = paceInput.value.trim();
  const speedFromTempo = convertPaceToSpeed(paceStr);

  if (speedFromTempo) {
    return speedFromTempo; // priorytet tempo → km/h
  }

  const speedStr = speedInput.value.trim();
  const speed = Number(speedStr.replace(",", "."));

  if (!Number.isNaN(speed) && speed > 0) {
    return speed; // fallback: km/h → tempo
  }

  return null;
}

function updateDistance() {
  error3.textContent = "";
  const durationStr = durationInput.value.trim();

  if (durationStr === "") {
    distanceOut.textContent = "– km";
    return;
  }

  const currentSpeed = getCurrentSpeed();
  if (!currentSpeed) {
    distanceOut.textContent = "– km";
    error3.textContent = "Najpierw wpisz tempo lub prędkość.";
    return;
  }

  const durationMinutes = Number(durationStr.replace(",", "."));
  if (Number.isNaN(durationMinutes) || durationMinutes <= 0) {
    distanceOut.textContent = "– km";
    error3.textContent = "Czas musi być dodatnią liczbą minut.";
    return;
  }

  const distance = (currentSpeed * durationMinutes) / 60; // km
  distanceOut.textContent = distance.toFixed(2) + " km";
}

    // tempo zmienia i prędkość, i dystans
    paceInput.addEventListener("input", () => {
      updateSpeed();
      updateDistance();
    });

    // zmiana czasu aktualizuje tylko dystans
    durationInput.addEventListener("input", updateDistance);
  </script>
</body>
</html>
    